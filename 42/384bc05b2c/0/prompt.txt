Implement the following plan:

# Voice Connection Health Indicator

## Context
The VoiceDock currently shows plain text ("Connection: Connected") for the WebSocket state only. The WebRTC/ICE transport state (the actual audio path) is not surfaced to the user at all — if ICE disconnects or fails, there's no visible indication. Replace the plain text with a colored dot + compact label that reflects combined WS + audio transport health.

- **Green** dot = WS connected + audio transport connected (good)
- **Yellow** dot = WS reconnecting or audio transport recovering (degraded)
- **Red** dot = WS failed or audio transport failed (failed)

## Data Flow
```
ICE connectionstatechange (send + recv transports)
  → transports.ts: updateTransportHealthFromIce()
  → state.ts: transportHealthState variable
  → subscriptions.ts: notifyTransportHealthSubscribers()
  → stores/voice.ts: transportHealth signal
  → stores/voice.ts: voiceHealthLevel() derived (combines WS + transport)
  → VoiceDock.tsx: colored dot + label
```

## Changes (10 files)

### 1. `client/src/api/media/types.ts`
Add type:
```ts
export type TransportHealthState = "new" | "connected" | "disconnected" | "failed" | "closed";
```

### 2. `client/src/api/media/state.ts`
- Import `TransportHealthState` from `./types`
- Add mutable var: `export let transportHealthState: TransportHealthState = "new";`
- Add setter: `export function setTransportHealthState(value: TransportHealthState) { ... }`
- Add subscriber set: `export const transportHealthSubscribers = new Set<(state: TransportHealthState) => void>();`

### 3. `client/src/api/media/subscriptions.ts`
Following the exact pattern of `subscribeCameraState`:
- Add `notifyTransportHealthSubscribers()` — reads `transportHealthState`, notifies all subscribers
- Add `subscribeTransportHealth(subscriber)` — adds to set, calls with current value, returns unsubscribe fn

### 4. `client/src/api/media/transports.ts`
- Import `setTransportHealthState` from `./state`, `notifyTransportHealthSubscribers` from `./subscriptions`
- Add severity map + `worstTransportState()` helper to pick the worst of send/recv states
- Add `updateTransportHealthFromIce()` — reads `sendTransport?.connectionState` + `recvTransport?.connectionState`, calls `setTransportHealthState` + `notifyTransportHealthSubscribers`
- Call `updateTransportHealthFromIce()` at the top of the existing `connectionstatechange` handler in `wireTransportConnectionStateMonitor`
- In `closeTransports()`: set state to `"closed"` + notify
- In `initializeMediaTransports()`: set state to `"new"` + notify after transport creation

### 5. `client/src/api/media/index.ts`
- Re-export `TransportHealthState` type from `./types`
- Re-export `subscribeTransportHealth` from `./subscriptions`

### 6. `client/src/stores/voice.ts`
- Import `TransportHealthState` type and `subscribeTransportHealth` from `../api/media`
- Add signal: `const [transportHealth, setTransportHealth] = createSignal<TransportHealthState>("new")`
- Add `let unsubscribeTransportHealth: (() => void) | null = null`
- Add exported `VoiceHealthLevel` type: `"good" | "degraded" | "failed"`
- Add exported `voiceHealthLevel()` function that reads both `voiceConnectionStatus()` and `transportHealth()`:
  - `"failed"` if either WS or transport is failed
  - `"degraded"` if WS is reconnecting/connecting/disconnected or transport is disconnected/closed
  - `"good"` if WS is connected and transport is connected or new
- Add `startTransportHealthSubscription()` / `stopTransportHealthSubscription()` following the pattern of `startConnectionStatusSubscription()`
- Update `resetVoiceState()` to call `stopTransportHealthSubscription()` and reset signal to `"new"`
- Export new signal + functions

### 7. `client/src/components/ChannelList.tsx`
- Import `startTransportHealthSubscription` and `stopTransportHealthSubscription`
- Call `startTransportHealthSubscription()` at line ~754 alongside `startConnectionStatusSubscription()`
- Call `stopTransportHealthSubscription()` at line ~993 alongside `stopConnectionStatusSubscription()`

### 8. `client/src/components/channel-list/helpers.ts`
Add new function (keep the old `connectionStatusLabel` for backward compat):
```ts
export function voiceHealthLabel(level: string): string {
  if (level === "good") return "Voice: Connected";
  if (level === "degraded") return "Voice: Reconnecting...";
  return "Voice: Failed";
}
```

### 9. `client/src/components/channel-list/VoiceDock.tsx`
- Import `voiceHealthLevel` from `../../stores/voice`
- Import `voiceHealthLabel` from `./helpers`
- Replace the connection status `<p>` (lines 91-93) with:
  ```tsx
  <p class={`voice-dock-status voice-dock-status-${voiceHealthLevel()}`}>
    <span class="voice-dock-status-dot" />
    {voiceHealthLabel(voiceHealthLevel())}
  </p>
  ```
- Update retry button condition from `voiceConnectionStatus() === "failed"` to `voiceHealthLevel() === "failed"` so it covers transport failures too

### 10. `client/src/styles/voice-dock.css`
Add after `.voice-dock-channel-alert`:
```css
.voice-dock-status {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  margin-top: var(--space-sm);
  font-family: var(--font-mono);
  font-size: 0.75rem;
  color: var(--gray-7);
}

.voice-dock-status-dot {
  width: 6px;
  height: 6px;
  border-radius: var(--radius-full);
  flex-shrink: 0;
  transition: background 0.2s var(--ease-soft);
}

.voice-dock-status-good .voice-dock-status-dot { background: var(--success); }
.voice-dock-status-good { color: var(--success); }
.voice-dock-status-degraded .voice-dock-status-dot { background: var(--warning); }
.voice-dock-status-degraded { color: var(--warning); }
.voice-dock-status-failed .voice-dock-status-dot { background: var(--danger); }
.voice-dock-status-failed { color: var(--danger); }
```

## What's preserved
- Retry button still works — condition broadened to cover transport failures
- Rejoin banner (`voiceRejoinNotice`) is untouched (rendered in ChannelList.tsx, not VoiceDock)
- All existing `closeTransports()` cleanup behavior unchanged
- The `connectionStatusLabel` function remains available for any other callers

## Verification
- Join voice in two tabs. Confirm green dot + "Voice: Connected" in the dock
- Use DevTools Network > Offline toggle while in voice — dot should turn yellow then red, "Retry connection" button should appear
- Reconnect network — dot should return to green after WS + ICE reconnect
- Type-check: `npx tsc --noEmit` should pass clean


If you need specific details from before exiting plan mode (like exact code snippets, error messages, or content you generated), read the full transcript at: /home/guibibi/.REDACTED.jsonl