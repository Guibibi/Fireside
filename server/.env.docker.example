# PostgreSQL container defaults
POSTGRES_USER=yankcord
POSTGRES_PASSWORD=replace-with-a-strong-password
POSTGRES_DB=yankcord
# Server DB connection string (required).
# URL-encode credentials in the URL when they contain reserved URI characters.
DATABASE_URL=postgres://yankcord:replace-with-a-strong-password@127.0.0.1:5432/yankcord

# Server runtime
JWT_SECRET=replace-with-a-long-random-secret
JWT_EXPIRATION_HOURS=24

# API bind
HOST=127.0.0.1
PORT=3000

# CORS allowlists (comma-separated)
# Include Tauri origins when desktop clients connect directly to this API.
# Example production value: tauri://localhost,http://tauri.localhost,https://chat.example.com
CORS_ALLOWED_ORIGINS=tauri://localhost,http://tauri.localhost,http://localhost:5173,http://127.0.0.1:5173,http://localhost:1420,http://127.0.0.1:1420
CORS_ALLOWED_METHODS=GET,POST,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=authorization,content-type

# mediasoup
MEDIA_WORKER_COUNT=2
WEBRTC_LISTEN_IP=0.0.0.0

# Required for public deployment: set to VM public IP or DNS name
WEBRTC_ANNOUNCED_IP=

# Upload/media storage pipeline
STORAGE_BACKEND=local
STORAGE_LOCAL_ROOT=/var/lib/yankcord/media
MEDIA_MAX_UPLOAD_BYTES=10485760
MEDIA_CLEANUP_INTERVAL_SECONDS=900
MEDIA_FAILED_RETENTION_HOURS=24

# Klipy GIF search integration (optional)
KLIPY_API_KEY=

# S3-compatible storage scaffold (not fully implemented yet)
S3_ENDPOINT=
S3_REGION=
S3_BUCKET=
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_FORCE_PATH_STYLE=true

# Caddy site address for web container.
# Use a domain (e.g. chat.example.com) for automatic HTTPS.
SITE_ADDRESS=:80

RUST_LOG=yankcord_server=info,tower_http=info
